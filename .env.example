# ================================================================
# SOCIAL FETCH PRO - ENVIRONMENT VARIABLES
# ================================================================
# Complete configuration template for all supported platforms
# Copy this file to .env.local for local development
# Add these variables to Render.com for production deployment
# ================================================================

# ================================================================
# SERVER CONFIGURATION
# ================================================================

# Port for the server (default: 3000, Render uses 5000)
PORT=5000

# Node environment (development | production)
NODE_ENV=production

# CORS allowed origins (comma-separated for multiple origins)
CORS_ORIGIN=*


# ================================================================
# YOUTUBE SCRAPING
# ================================================================

# Method 1: Cookie-based scraping (Current - ~70% metadata)
# Get from browser: F12 → Application → Cookies → youtube.com
# Copy ALL cookies as single string separated by semicolons
YOUTUBE_COOKIE=VISITOR_INFO1_LIVE=xxxxx; PREF=xxxxx; YSC=xxxxx; LOGIN_INFO=xxxxx

# Method 2: Official YouTube Data API v3 (Recommended - 100% metadata)
# Get from: https://console.cloud.google.com
# Enable YouTube Data API v3 → Create API Key
# Free tier: 10,000 quota units/day (~100 video detail requests)
# YOUTUBE_API_KEY=AIzaSyXXXXXXXXXXXXXXXXXXXXXXXXXXXX


# ================================================================
# TWITTER/X SCRAPING
# ================================================================

# Method 1: Cookie-based scraping (Current - ~70% metadata)
# Get from browser: F12 → Application → Cookies → twitter.com
# Must include: auth_token, ct0, twid
TWITTER_COOKIE=auth_token=xxxxx; ct0=xxxxx; twid=xxxxx; kdt=xxxxx

# Bearer token for Twitter GraphQL API (public web app token)
TWITTER_BEARER_TOKEN=AAAAAAAAAAAAAAAAAAAAANRILgAAAAAAnNwIzUejRCOuH5E6I8xnZz4puTs%3D1Zv7ttfk8LF81IUq16cHjhLTvJu4FA33AGWWjCpTnA

# Method 2: Official Twitter API v2 (Recommended - 100% metadata)
# Get from: https://developer.twitter.com
# Apply for developer account → Create app → Get Bearer Token
# Free tier: 1,500 tweets/month
# TWITTER_BEARER_TOKEN_V2=AAAAAAAAAAAAAAAAAAAAABxxxxxxxxxxxxxxxxxxxxxxx


# ================================================================
# INSTAGRAM SCRAPING
# ================================================================

# Cookie-based scraping (Required - Instagram has no free API)
# Get from browser: F12 → Application → Cookies → instagram.com
# Must include sessionid cookie
INSTAGRAM_COOKIE=sessionid=xxxxx; ds_user_id=xxxxx; csrftoken=xxxxx

# Session ID (extracted from cookie above)
# This is the value of the "sessionid" cookie
INSTAGRAM_SESSION_ID=xxxxx%3A%3A%3AXxxXxXxXxX


# ================================================================
# TIKTOK SCRAPING
# ================================================================

# Method 1: Cookie-based API scraping (Current - 90% metadata) ⭐ RECOMMENDED
# Format: JSON string with all required cookies
# Get from browser: F12 → Application → Cookies → tiktok.com
# IMPORTANT: Must be valid JSON format with ALL 9 cookies
TIKTOK_COOKIES={"tt_session_tlb_tag_ads":"sttt%7C3%7C-xxxxx","tt_ticket_guard_client_data":"eyJ0dC10aWNrZXQtZ3VhcmQtxxxxx","tt_ticket_guard_client_web_domain":"2","tta_attr_id_mirror":"0.xxxxx.xxxxx","ttwid":"1%7Cxxxxx%7Cxxxxx%7Cxxxxx","uid_tt":"xxxxx","uid_tt_ads":"xxxxx","uid_tt_ss":"xxxxx","uid_tt_ss_ads":"xxxxx"}

# Legacy cookie format (DEPRECATED - kept for backward compatibility)
TIKTOK_COOKIE=sessionid=xxxxx; tt_webid=xxxxx
TIKTOK_SESSION_ID=xxxxx

# Method 2: Official TikTok Display API (Requires OAuth approval + KYC)
# Get from: https://developers.tiktok.com/
# Requires: Business verification + KYC approval
TIKTOK_APP_ID=
TIKTOK_APP_SECRET=
TIKTOK_REDIRECT_URI=https://social-fetch-pro.onrender.com/oauth-callback
TIKTOK_ADVERTISER_ID=
TIKTOK_USE_SANDBOX=true
# Optional manual override if you already have tokens
TIKTOK_ACCESS_TOKEN=
TIKTOK_REFRESH_TOKEN=
TIKTOK_API_BASE=


# ================================================================
# BRIGHT DATA PROXY CONFIGURATION
# ================================================================

# Bright Data Browser (for browser automation - requires KYC for TikTok)
# Format: wss://brd-customer-xxx-zone-xxx:password@brd.superproxy.io:9222
BRIGHTDATA_BROWSER_URL=wss://brd-customer-hl_4a6f8ccb-zone-scraping_browser1:207rpgif22p1@brd.superproxy.io:9222

# Bright Data Proxy (for HTTP requests with residential IPs)
# Format: http://brd-customer-xxx-zone-xxx:password@brd.superproxy.io:22225
BRIGHTDATA_PROXY_URL=http://brd-customer-hl_4a6f8ccb-zone-scraping_browser1:207rpgif22p1@brd.superproxy.io:22225

# Bright Data Unlocker API Key (for anti-bot bypass)
BRIGHTDATA_UNLOCKER_API=f6698ae3-f609-4f80-82e1-7fa42f3c897a

# Enable Bright Data proxy by default (true | false)
USE_BRIGHTDATA=true


# ================================================================
# OPTIONAL: ALTERNATIVE PROXY SERVICES
# ================================================================

# Oxylabs Proxy (alternative to Bright Data)
# OXYLABS_USERNAME=customer-xxxxx
# OXYLABS_PASSWORD=xxxxx
# OXYLABS_PROXY_URL=http://customer-xxxxx:xxxxx@pr.oxylabs.io:7777

# SmartProxy (alternative to Bright Data)
# SMARTPROXY_USERNAME=spxxxxx
# SMARTPROXY_PASSWORD=xxxxx
# SMARTPROXY_PROXY_URL=http://spxxxxx:xxxxx@gate.smartproxy.com:7000


# ================================================================
# OPTIONAL: OFFICIAL API KEYS (For 100% metadata)
# ================================================================

# Rapid API Key (for third-party social media APIs)
# Get from: https://rapidapi.com/
# RAPIDAPI_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Social Data API (alternative scraping service)
# Get from: https://socialdata.tools/
# SOCIALDATA_API_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx


# ================================================================
# DATABASE CONFIGURATION (Optional - for caching)
# ================================================================

# MongoDB Connection (for caching scraped data)
# MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/social-fetch-pro

# Redis Cache (for rate limiting and response caching)
# REDIS_URL=redis://default:password@redis-xxxxx.upstash.io:6379


# ================================================================
# LOGGING & MONITORING (Optional)
# ================================================================

# Log level (debug | info | warn | error)
LOG_LEVEL=info

# Sentry Error Tracking
# Get from: https://sentry.io/
# SENTRY_DSN=https://xxxxx@xxxxx.ingest.sentry.io/xxxxx


# ================================================================
# RATE LIMITING
# ================================================================

# Rate limit per IP (requests per minute)
RATE_LIMIT_PER_MINUTE=30

# Rate limit window (milliseconds)
RATE_LIMIT_WINDOW=60000


# ================================================================
# FEATURE FLAGS
# ================================================================

# Enable V2 metadata extraction (hashtags, mentions, etc.)
ENABLE_V2_METADATA=true

# Enable proxy fallback (try direct first, then proxy)
ENABLE_PROXY_FALLBACK=true

# Enable request caching (cache responses for X minutes)
ENABLE_CACHING=false
CACHE_TTL_MINUTES=15


# ================================================================
# SECURITY (Optional)
# ================================================================

# API Key for authenticated requests
# Add to request header: X-API-Key: your-secret-key
# API_KEY=your-secret-api-key-here

# JWT Secret for token authentication
# JWT_SECRET=your-jwt-secret-key-here

# CORS credentials
CORS_CREDENTIALS=true


# ================================================================
# QUICK START GUIDE
# ================================================================
#
# MINIMUM REQUIRED FOR EACH PLATFORM:
#
# YouTube:  YOUTUBE_COOKIE
# Twitter:  TWITTER_COOKIE + TWITTER_BEARER_TOKEN
# Instagram: INSTAGRAM_COOKIE + INSTAGRAM_SESSION_ID
# TikTok:   TIKTOK_COOKIES (JSON format with 9 cookies)
#
# OPTIONAL BUT RECOMMENDED:
# - BRIGHTDATA_PROXY_URL (for better reliability)
# - USE_BRIGHTDATA=true
#
# HOW TO GET COOKIES (All Platforms):
# 1. Open Chrome/Firefox
# 2. Go to platform and login
# 3. Press F12 → Application → Cookies
# 4. Copy cookie values
# 5. For TikTok: Format as JSON with ALL 9 cookies
#
# COOKIE EXPIRY:
# - YouTube:   ~180 days
# - Twitter:   ~30 days
# - Instagram: ~90 days
# - TikTok:    ~90 days (current expires: Dec 2, 2025)
#
# FOR RENDER.COM DEPLOYMENT:
# 1. Go to dashboard.render.com
# 2. Select your service
# 3. Environment tab → Add each variable
# 4. Save changes (auto-redeploys)
#
# PRIORITY (System tries in this order):
# 1. Official API (best quality) - if API key provided
# 2. Cookie scraping (good quality) - if cookies provided
# 3. Public scraping (limited) - fallback if nothing else
#
# SECURITY NOTES:
# - NEVER commit .env or .env.local to git
# - Use .env.example as template only
# - Store production secrets in Render environment variables
# - Rotate cookies if compromised
# - Monitor for unauthorized access
#
# ================================================================
# END OF CONFIGURATION
# ================================================================
